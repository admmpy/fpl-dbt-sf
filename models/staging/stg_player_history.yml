version: 2

models:
    - name: stg_player_history
      description: Player history data for FPL matches
      columns:
        - name: player_id
          description: Unique identifier for the player
          tests:
            - not_null
            - relationships:
                arguments:
                  to: ref('stg_players')
                  field: player_id
        - name: gameweek_id
          description: Gameweek identifier for the player history
          tests:
            - not_null
            - relationships:
                arguments:
                  to: ref('stg_gameweeks')
                  field: gameweek_id
        - name: fixture_id
          description: Unique identifier for the fixture
          tests:
            - not_null
        - name: opponent_team_id
          description: Unique identifier for the opponent team
          tests:
            - not_null
        - name: total_points
          description: Total points scored in the fixture
          tests:
            - not_null
        - name: was_home
          description: Whether the player was playing at home
          tests:
            - not_null
        - name: kickoff_at
          description: Kickoff time for the fixture
          tests:
            - not_null
        - name: team_h_score
          description: Home team score
          tests:
            - not_null
        - name: team_a_score
          description: Away team score
          tests:
            - not_null
        - name: minutes_played
          description: Minutes played in the fixture
          tests:
            - not_null
        - name: goals_scored
          description: Goals scored in the fixture
          tests:
            - not_null
        - name: assists
          description: Assists in the fixture
          tests:
            - not_null
        - name: clean_sheets
          description: Clean sheets in the fixture
          tests:
            - not_null
        - name: goals_conceded
          description: Goals conceded in the fixture
          tests:
            - not_null
        - name: own_goals
          description: Own goals in the fixture
          tests:
            - not_null
        - name: penalties_saved
          description: Penalties saved in the fixture
          tests:
            - not_null
        - name: penalties_missed
          description: Penalties missed in the fixture
          tests:
            - not_null
        - name: yellow_cards
          description: Yellow cards in the fixture
          tests:
            - not_null
        - name: red_cards
          description: Red cards in the fixture
          tests:
            - not_null
        - name: saves
          description: Saves in the fixture
          tests:
            - not_null
        - name: bonus
          description: Bonus points in the fixture
          tests:
            - not_null
        - name: bps
          description: Bonus points system in the fixture
          tests:
            - not_null
        - name: influence
          description: Influence score in the fixture
          tests:
            - not_null
        - name: creativity
          description: Creativity score in the fixture
          tests:
            - not_null
        - name: threat
          description: Threat score in the fixture
          tests:
            - not_null
        - name: ict_index
          description: ICT index score in the fixture
          tests:
            - not_null
        - name: transfers_in
          description: Transfers in for the fixture
          tests:
            - not_null
        - name: transfers_out
          description: Transfers out for the fixture
          tests:
            - not_null
        - name: transfers_balance
          description: Transfer balance for the fixture
          tests:
            - not_null
        - name: selected
          description: Number of times selected for the fixture
          tests:
            - not_null
        - name: expected_goals
          description: Expected goals in the fixture
          tests:
            - not_null
        - name: expected_assists
          description: Expected assists in the fixture
          tests:
            - not_null
        - name: expected_goal_involvements
          description: Expected goal involvements in the fixture
          tests:
            - not_null
        - name: expected_goals_conceded
          description: Expected goals conceded in the fixture
          tests:
            - not_null
        - name: player_value
          description: Player value in the fixture